{{> RuleEditorHeader heading="Modify Headers in HTTP Request and Response" }}


<section class="rule-body">
  <div class="alert alert-dismissable alert-warning message">
    <button type="button" class="close hide-message" data-dismiss="alert">x</button>
    <p>Modifications in Response Headers are not visible in Dev tools.
      <a href="https://code.google.com/p/chromium/issues/detail?id=258064" class="alert-link" target="_blank">Chromium Bug Link</a>
    </p>
  </div>

  {{> RuleProperties}}

  <div class="pairs-container">
    {{> PairsContainerHeading heading="Headers Modification Rules" }}

    <div class="well well-sm">
      {{#each pairs}}

        {{#gt @index 0}} <hr /> {{/gt}}

        <div class="pair-container" data-index="{{@index}}">
          <div>
            <div class="header-modification-type-container">
              <span class="dropdown-container">
                <select class="modification-type-select" data-key="type">
                  <option value="{{readGlobalVar "RQ.MODIFICATION_TYPES.ADD" }}"
                    {{#equalsGlobalVar "RQ.MODIFICATION_TYPES.ADD" type }}selected{{/equalsGlobalVar}}>Add</option>

                  <option value="{{readGlobalVar "RQ.MODIFICATION_TYPES.REMOVE" }}"
                    {{#equalsGlobalVar "RQ.MODIFICATION_TYPES.REMOVE" type }}selected{{/equalsGlobalVar}}>Remove</option>

                  <option value="{{readGlobalVar "RQ.MODIFICATION_TYPES.MODIFY" }}"
                    {{#equalsGlobalVar "RQ.MODIFICATION_TYPES.MOIFY" type }}selected{{/equalsGlobalVar}}>Modify</option>
                </select>
              </span>
            </div>

            <div class="header-target-container">
              <span class="dropdown-container">
                <select class="header-target-select" data-key="target">
                  <option value="{{readGlobalVar "RQ.HEADERS_TARGET.REQUEST" }}"
                    {{#equalsGlobalVar "RQ.HEADERS_TARGET.REQUEST" target }}selected{{/equalsGlobalVar}}>Request</option>

                  <option value="{{readGlobalVar "RQ.HEADERS_TARGET.RESPONSE" }}"
                    {{#equalsGlobalVar "RQ.HEADERS_TARGET.RESPONSE" target }}selected{{/equalsGlobalVar}}>Response</option>
                </select>
              </span>
            </div>

            <div class="input-group">
              <span class="input-group-addon">Header</span>
              <input type="text" class="form-control header-input" data-key="header" placeholder="Header Name" value="{{header}}">
            </div>

            {{#unequalsGlobalVar "RQ.MODIFICATION_TYPES.REMOVE" type }}
              <div class="input-group">
                <span class="input-group-addon">Value</span>
                <input type="text" class="form-control value-input" data-key="value" placeholder="Header Value" value="{{value}}"/>
              </div>
            {{/unequalsGlobalVar}}
          </div>

          {{> SourceField sourcePlaceholder="Leave this field Empty to apply above modification to all urls" }}
        </div>

      {{/each}}
    </div>
  </div>

  {{> SaveRuleCTA }}
</section>
